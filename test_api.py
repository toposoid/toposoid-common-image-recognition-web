'''
  Copyright 2021 Linked Ideal LLC.[https://linked-ideal.com/]
 
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at
 
      http://www.apache.org/licenses/LICENSE-2.0
 
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
 '''

from fastapi.testclient import TestClient
from api import app
from model import FeatureVector
import pytest
import math

#This is a unit test module
client = TestClient(app)

def test_getFeatureVector():
    response = client.post("/getFeatureVector",
                        headers={"Content-Type": "application/json"},
                        json={"url": "http://images.cocodataset.org/val2017/000000039769.jpg"})    

    assert response.status_code == 200
    featureVector = FeatureVector.parse_obj(response.json())    
    correctVector = [-0.9865750074386597, 0.2391519695520401, -1.1240851879119873, -0.7086144685745239, -1.465924859046936, -1.4607294797897339, -0.8432410359382629, -0.12733756005764008, -1.248138189315796, -0.7067972421646118, -0.188870370388031, -1.3533880710601807, -0.8030474781990051, -1.7446198463439941, -0.26688283681869507, -1.0764524936676025, -0.4670076072216034, -0.3147560954093933, -1.1681820154190063, -0.330845445394516, -1.0260515213012695, -1.4879781007766724, -2.7129061222076416, -0.40880680084228516, -0.7807238698005676, 1.0991191864013672, -1.1465950012207031, 0.06259997189044952, 0.6747358441352844, -1.7034465074539185, -0.6004911661148071, -0.621035635471344, -0.10690052807331085, -0.8295790553092957, 0.02018265798687935, -0.1505032181739807, 0.5496814250946045, 1.0245897769927979, -0.7208324670791626, -1.4952495098114014, -0.9033578634262085, 0.6942367553710938, -0.3903653919696808, -2.3996920585632324, -1.6913501024246216, -0.9756516218185425, -1.4862498044967651, -1.835325002670288, -0.9547889232635498, -0.14765965938568115, -1.5632381439208984, -2.0958619117736816, -0.09851875901222229, 0.40279942750930786, -0.9047854542732239, -1.1610814332962036, -0.31102049350738525, -1.1487358808517456, -1.1690760850906372, -2.1007087230682373, -1.0418630838394165, -2.6403753757476807, -1.0041499137878418, -1.5795938968658447, -1.5157582759857178, -0.7982611060142517, -0.043168388307094574, -1.8446805477142334, -0.28337329626083374, -0.20148830115795135, -1.3530856370925903, -0.23560278117656708, -0.13875363767147064, 0.2941325902938843, -0.1606103479862213, -0.0993446558713913, -0.0654328316450119, -0.7712201476097107, -0.8607850670814514, -0.34815794229507446, -0.7972298264503479, -1.3372414112091064, -0.4168304204940796, -2.189549207687378, 0.3665961027145386, -0.7260850667953491, -0.5112027525901794, 0.0673689991235733, 0.5507470369338989, -1.7454248666763306, -1.0953787565231323, -0.09734490513801575, 0.007652558386325836, -0.7542802691459656, -0.6334187984466553, 0.045174822211265564, -1.8611282110214233, -0.6792448163032532, -0.4922615587711334, -0.9839259386062622, -1.1698838472366333, -0.5104817152023315, -0.510865330696106, 1.5564475059509277, -1.5403943061828613, -1.602396011352539, -1.8547677993774414, -0.04147745668888092, -1.5921672582626343, -0.8700117468833923, -1.255659818649292, -0.23869219422340393, -0.9496863484382629, -1.2195690870285034, 0.029873885214328766, -1.4891831874847412, -1.9438776969909668, -0.508882999420166, -1.0679261684417725, -0.76763516664505, -0.07112200558185577, -0.8423706889152527, -0.9819294810295105, -1.2498639822006226, 0.3566851019859314, -1.1287457942962646, -0.7341386079788208, -0.7976630926132202, -0.14896652102470398, -1.435607671737671, 0.7714943885803223, -0.10493215918540955, -0.9128453731536865, -1.5849982500076294, -0.18635627627372742, -0.7396048307418823, -0.14209166169166565, 0.43577009439468384, 0.5014457702636719, -1.304060697555542, -0.3820771276950836, -0.965054988861084, -1.2795312404632568, -0.6034430265426636, -0.6214154958724976, -2.0147204399108887, -1.5047659873962402, -0.569833517074585, -1.2920105457305908, -1.903527021408081, 0.8176304697990417, -0.10450467467308044, -0.7311538457870483, -1.1590561866760254, -0.988000214099884, 0.30881452560424805, -0.23056697845458984, 0.8760749101638794, -0.5409204363822937, -0.19689412415027618, 0.4517812728881836, -0.007755972445011139, -0.46302330493927, -0.7433829307556152, 0.5425221920013428, 0.14164035022258759, -2.0223309993743896, -2.4463813304901123, 1.3501518964767456, -0.35988369584083557, 0.5926402807235718, -0.36024707555770874, -0.58384770154953, -0.976010799407959, 0.7748420238494873, -1.7197016477584839, -1.563143014907837, -0.8224238753318787, 0.33505702018737793, -0.15212424099445343, 0.19936206936836243, -0.7820988893508911, 1.2875332832336426, -0.4710021913051605, -0.08272011578083038, 1.76993989944458, 0.3296058177947998, 1.963647484779358, -1.6282341480255127, 0.10258102416992188, -1.879526138305664, -0.48172593116760254, 0.623611569404602, 1.3888897895812988, -0.42772746086120605, 0.9079909920692444, 0.21087506413459778, 0.9645991325378418, 1.1715004444122314, 1.56515634059906, 0.37898027896881104, 0.7895659804344177, 0.962733805179596, -0.1244516521692276, 1.0800663232803345, 2.337336301803589, 0.6904765963554382, 0.3001238703727722, -0.0997241660952568, -1.5804426670074463, -0.9813454747200012, 0.31436970829963684, 0.039165519177913666, -1.820243000984192, 0.7111057043075562, -0.7046679854393005, -0.39008253812789917, -0.4570395350456238, -2.561379909515381, 0.6971921324729919, -0.24901744723320007, -1.1195330619812012, 0.43392807245254517, 2.3056352138519287, 1.9325568675994873, -0.016412705183029175, 0.7021118998527527, -0.02018166333436966, -1.2580674886703491, -0.6978146433830261, -0.14070037007331848, 1.2441803216934204, 1.724940299987793, -0.17084303498268127, -0.6254884600639343, 1.1446088552474976, -0.012311168015003204, 0.4045723080635071, -0.024911075830459595, 0.47480133175849915, 1.1344497203826904, 0.5280090570449829, -0.1332424283027649, -0.02264535427093506, 1.2378087043762207, -1.3579425811767578, 0.23949185013771057, -1.0175598859786987, -0.7755343914031982, -0.5480978488922119, -2.048258066177368, 0.8618885278701782, 0.2955721318721771, -1.0723131895065308, -0.07585269957780838, 1.520409107208252, 0.6113962531089783, 0.9899974465370178, -0.8704792261123657, 0.04621971398591995, -1.0453710556030273, 0.6972774863243103, -0.9953925609588623, -1.1561044454574585, 1.5159029960632324, 0.5945026874542236, -0.09381034970283508, -0.6968209147453308, 0.7156846523284912, -1.4782640933990479, -2.550255298614502, -1.192130208015442, -0.054579511284828186, -1.7252477407455444, -1.337058186531067, -1.0286229848861694, -0.02112674154341221, -1.560495376586914, -0.18041016161441803, -2.137476921081543, -0.8253647089004517, 6.7510600090026855, 5.984114646911621, 1.1220510005950928, 1.23647940158844, 5.991206645965576, -0.4469583034515381, 3.199038028717041, -1.0546222925186157, 0.34119144082069397, -0.8939927816390991, -1.2488524913787842, 0.002495415508747101, -0.42106345295906067, -1.779206395149231, -0.22916123270988464, -1.0595531463623047, -0.804106593132019, 0.06809501349925995, 0.4932241141796112, 0.10884886980056763, -0.48265576362609863, 1.0943918228149414, 0.6961171627044678, 0.06980384886264801, -0.8731842041015625, -1.0231860876083374, 1.0283126831054688, -0.7009494304656982, 0.14512857794761658, -0.9177922010421753, -1.5545932054519653, -1.6001648902893066, -0.8992361426353455, -0.7835983037948608, -1.5471142530441284, -0.4651103913784027, -1.6048465967178345, -1.5696967840194702, -2.4047789573669434, -1.4379276037216187, -0.7902361750602722, -1.4032140970230103, -1.2190840244293213, 0.19840772449970245, -1.1834335327148438, -0.3597082793712616, -1.283575415611267, -0.8544935584068298, -0.4678686261177063, -1.0618640184402466, -1.6159025430679321, 0.5717253684997559, -0.3332199454307556, -2.135669469833374, -1.0625405311584473, -0.21329379081726074, -0.8680143356323242, 2.37961483001709, -1.1246892213821411, -0.7515919804573059, -1.2085460424423218, -0.6449325084686279, -1.7909268140792847, -1.2985235452651978, -1.1881587505340576, -1.1806671619415283, -1.6994777917861938, -2.410325527191162, -1.3820350170135498, -0.9141218662261963, -1.559083104133606, -2.5913166999816895, -1.218368411064148, -1.2167797088623047, -1.1710307598114014, 0.0008719265460968018, 0.30563580989837646, 0.7854880690574646, 2.165334463119507, -0.37459418177604675, 1.9502627849578857, -0.9126149415969849, -1.4782137870788574, 0.6014074087142944, -0.06364105641841888, -0.3821316361427307, 0.2693500220775604, 0.37701737880706787, 0.6734012365341187, -1.181101679801941, -2.3452394008636475, -2.5854368209838867, -1.6277105808258057, -2.3558921813964844, -1.1538935899734497, -1.1557698249816895, -0.14146941900253296, -0.5761004686355591, -1.9709932804107666, -0.1731877475976944, -1.351297378540039, -0.9414746761322021, -0.04173559322953224, 0.19518770277500153, -0.41280728578567505, -0.2697683572769165, -0.15737588703632355, -0.3628275990486145, -1.952049732208252, -0.26924437284469604, -0.9362735748291016, -1.8436583280563354, -1.376503586769104, -2.0300092697143555, -1.7213268280029297, -1.3087196350097656, -1.9052841663360596, 0.3115178346633911, -1.6537375450134277, 1.3402785062789917, 0.877729594707489, 0.027839474380016327, -0.06597770750522614, -1.3780975341796875, -0.8412074446678162, 0.9865177273750305, -0.7055519223213196, -2.236973285675049, -0.2535403370857239, -1.6236388683319092, -0.7323477864265442, 0.5910629034042358, -2.351083278656006, 0.9447277784347534, -1.8304556608200073, 0.47876104712486267, -0.2520681619644165, 0.323138028383255, 0.04898276925086975, 0.2316868007183075, -2.291095018386841, 0.7791014909744263, 0.7872188091278076, 1.2989860773086548, -0.8571213483810425, 0.9188191890716553, -1.5406382083892822, -2.2409656047821045, -0.8299680948257446, -2.550107002258301, -1.3745648860931396, -0.44280099868774414, -0.3183143734931946, -1.303633213043213, -0.7907053828239441, 0.27015185356140137, -0.5663822889328003, -1.0987128019332886, -0.2517269253730774, -0.13823363184928894, -1.6942486763000488, -0.9834099411964417, 1.1613643169403076, -1.8265846967697144, -0.3262884318828583, -1.172994613647461, -1.8733055591583252, -1.7441260814666748, -0.7226626873016357, 0.040544621646404266, -0.8781301379203796, -0.6847882270812988, 0.15365853905677795, 0.1977987289428711, -0.17853260040283203, -1.8148771524429321, 1.8020038604736328, -0.7245526313781738, 0.9096951484680176, 0.2201206386089325, -2.735464334487915, -1.6387320756912231, -1.0633141994476318, -2.3745529651641846, -2.2059450149536133, -1.4253818988800049, 0.8463287353515625, -0.9528790712356567, -1.0539324283599854, 0.23766496777534485, -2.9212918281555176, -1.846379041671753, -0.5588513612747192, -3.7234206199645996, -1.0863733291625977, -1.4050990343093872, 0.6945724487304688, 2.011610984802246, -2.2384870052337646, -2.9606707096099854, -1.4610722064971924, -1.0538145303726196, -0.5618942975997925, -0.9842694401741028, -0.09552637487649918, -0.8871322274208069, -1.1775909662246704, -0.537521481513977, -2.3515777587890625, -1.2215096950531006, -2.0303876399993896, -0.6313363313674927, -0.8764896988868713, -0.9442107677459717, -1.0267088413238525, 1.9994244575500488, -0.05967802554368973, -1.8256083726882935, -0.9438616633415222, -0.9870182275772095, 0.3623260259628296, -0.484435111284256, -1.3475781679153442, -0.25362586975097656, -1.3105993270874023, 0.3588341772556305, -0.8518420457839966, 2.2733633518218994, -0.420219749212265, -0.06327129155397415, -0.8021217584609985, 1.5636351108551025, 0.15379352867603302, 0.33173036575317383, -0.7232635021209717, -0.47367051243782043, -1.3053380250930786, -1.1336109638214111, -0.799333393573761, -0.5623354315757751, 1.0195316076278687, -1.5748223066329956, -0.9597753882408142, -2.3200337886810303, -1.2147102355957031, 1.8027492761611938, 1.414218544960022, -0.4079357981681824, -0.34759262204170227, -0.23162119090557098, -0.8067103624343872, 0.20462006330490112, 0.5134530663490295, -1.261231541633606, -2.480109930038452, 0.9678403735160828, -2.515631914138794, -0.7285317182540894, 0.8385170698165894, -1.52152419090271, -0.040137313306331635, 0.5552438497543335, 1.650125503540039, -2.7463912963867188, -0.22168760001659393, -0.27569279074668884, -0.21632561087608337, -0.14686839282512665, -0.6042178869247437, -0.5783284306526184, 0.6747761964797974, 1.6362171173095703, -0.44455429911613464, 0.7021516561508179, -0.8510153293609619, -2.750542640686035, -1.7782340049743652, -1.5546607971191406, -1.4708714485168457, -1.2023632526397705, -1.6717803478240967, -1.341261863708496, 2.365417718887329, -0.23096764087677002, -1.2866108417510986, -0.7525453567504883, 0.5551323890686035, -0.15273305773735046, -2.2097504138946533, -1.768322229385376, -1.8171418905258179, -0.4039261043071747, -1.1850273609161377, -0.29731473326683044, -1.2242045402526855, -0.8189112544059753, -0.03617352247238159, 0.3412169814109802, -1.614984393119812, -1.1836258172988892, -0.555298388004303, 0.7334770560264587, -1.3324158191680908, -0.6736618876457214, 1.389684796333313, -0.3635949194431305, 1.832802414894104, 0.5948771238327026, 2.6800951957702637, -0.3867689073085785, -1.2449666261672974, 0.5270311236381531, 0.6055525541305542, -1.9010834693908691, -1.6533509492874146, -1.327447772026062, -0.9954898357391357, -1.460167646408081, -1.2105971574783325, -0.7504364848136902, -1.0230649709701538, -0.4414578676223755, -1.7674473524093628, -1.0133086442947388, 0.17706137895584106, 1.6150188446044922, -0.5262840986251831, -0.9771015048027039, -0.911340057849884, -1.2655946016311646, 0.9041284322738647, -1.4948383569717407, 0.6004969477653503, -2.0722060203552246, -0.3827666938304901, -0.29829472303390503, 0.12409774214029312, -2.2439725399017334, -1.0580437183380127, 1.759846568107605, -0.8589298725128174, 2.2048227787017822, 1.2343864440917969, -0.8197486400604248, 0.10452514886856079, 0.17740893363952637, -1.1175462007522583, 0.40341195464134216, 0.5189436078071594, -1.7949098348617554, 2.107388973236084, -0.9558030366897583, -0.5891597867012024, -1.8928722143173218, -2.200597047805786, -0.2220161110162735, -1.3259177207946777, -0.4277536869049072, -1.722267508506775, -1.1943376064300537, 1.2252219915390015, -1.4874597787857056, -1.9226115942001343, 0.34135544300079346, -1.4486572742462158, -1.1265439987182617, -1.1282418966293335, 0.5234165787696838, -0.11704802513122559, 0.5820674300193787, -1.577299952507019, -0.6225916743278503, -3.2341251373291016, -1.7366644144058228, -2.179572105407715, -1.4942885637283325, -1.1814088821411133, -0.1370733231306076, 0.16176339983940125, -0.5837384462356567, -1.2695462703704834, 0.8682036995887756, -0.121797576546669, 0.43503856658935547, -0.4379620850086212, -2.889272689819336, 0.30076372623443604, -1.5174367427825928, -1.1210088729858398, -0.87916499376297, -1.6460468769073486, -0.6061860918998718, 3.7736308574676514, -2.883697509765625, -0.9819297194480896, -1.4214825630187988, -0.8607431650161743, -1.3032011985778809, 0.24570050835609436, 0.13109657168388367, 0.5203925967216492, -0.4011024832725525, 0.1695658415555954, 1.2099984884262085, -1.251434564590454, -1.8678674697875977, -2.5475480556488037, 1.2425419092178345, -1.674949049949646, -2.0327911376953125, 1.0854706764221191, 1.3329297304153442, -0.613794207572937, -0.9049422144889832, -2.3239057064056396, 0.771239697933197, 1.3643156290054321, -0.6125775575637817, -0.3110683560371399, -0.10918113589286804, -0.752184271812439, -0.816446840763092, -2.586345672607422, -2.726311683654785, -0.35742321610450745, -2.243149995803833, -1.1756839752197266, -1.284808874130249, 1.4651522636413574, 0.3788660764694214, -0.676722526550293, -0.40260952711105347, -1.2703231573104858, 0.47127631306648254, -1.7226911783218384, -1.8451372385025024, -0.09024868160486221, -1.0471220016479492, 0.7524858713150024, 1.7739099264144897, 0.7319731712341309, 1.0467488765716553, -0.8062862753868103, -1.3695205450057983, -1.0519096851348877, -1.5959761142730713, -2.7695322036743164, 0.9571086764335632, -1.85574209690094, -2.0172476768493652, -1.6585745811462402, -0.48133426904678345, -2.204465866088867, -1.0392296314239502, -1.5642783641815186, 1.6310406923294067, 1.2266309261322021, -1.6694633960723877, -2.2221126556396484, 0.004468642175197601, 1.106945276260376, 1.1285169124603271, -1.6885727643966675, -1.8222308158874512, -1.7362780570983887, -1.166150450706482, 2.6054258346557617, -0.9925540089607239, 0.9686096906661987, 3.478659152984619, -0.7271316051483154, 0.03216768801212311, 0.8293574452400208, 0.09696841239929199, -1.2425928115844727, -0.11783285439014435, -1.5550390481948853, -0.20322856307029724, -1.494220495223999, 1.2185587882995605, 3.9028236865997314, -0.6321173906326294, -0.40950289368629456, -2.399157762527466, -1.8920137882232666, -2.6081697940826416, 0.32788777351379395, 0.14512300491333008, 1.2540745735168457, -0.16639618575572968, -2.419205904006958, -0.624539852142334, 0.14916560053825378, -1.136726975440979, -1.4731390476226807, -1.1465920209884644, -0.5618786811828613, 0.5463395118713379, -2.277367115020752, -1.9334266185760498, -1.3753355741500854, 1.4765279293060303, -1.350255012512207, 1.56952702999115, -0.08785082399845123, 0.7331207990646362, -1.3533943891525269, -0.7590689063072205, -1.0339864492416382, -0.23591619729995728, -2.8233752250671387, -3.2316062450408936, -0.9408998489379883, -0.08951468020677567, -1.0055832862854004, -2.4104080200195312, 3.039487600326538, 0.30843624472618103, -2.008758068084717, -0.6496386528015137, -1.2115966081619263, -3.021636962890625, -2.1272692680358887, 0.5449134707450867, -1.3366762399673462, 1.6638998985290527, -0.6641553044319153, -0.9175009727478027, 0.9887049794197083, -0.019847966730594635, 1.8166333436965942, -1.6761102676391602, -0.24861347675323486, -1.447697639465332, 0.4671715199947357, 0.2962549030780792, -0.335392564535141, 0.11518028378486633, -1.754553198814392, -1.2284008264541626, 0.12254412472248077, -2.585984945297241, 1.7056477069854736, -0.9030784368515015, -1.8479511737823486, -0.013997924514114857, -2.1219422817230225, -0.15478917956352234, -0.14031781256198883, 0.4087405800819397, 1.6060959100723267, -0.9396616220474243, -0.3828519582748413, -0.7291330099105835, -2.4045631885528564, -2.499537944793701, -1.3250267505645752, 0.6607075333595276, 0.1584891974925995, 0.6260953545570374, -0.7122804522514343, 1.172677993774414, -2.3255786895751953, -2.500962018966675, 0.7222312092781067, -0.9936234951019287, -0.10219613462686539, -0.22804918885231018, -0.3772567808628082, 1.3640775680541992, 0.7259913682937622, -0.21265681087970734, -1.726027488708496, -0.5582286715507507, 0.9005897641181946, -1.750874638557434, -1.702650785446167, -0.24057181179523468, -0.5992969274520874, 0.8997902274131775, 0.48275095224380493, -1.346266508102417, -1.2151597738265991, 0.7573203444480896, 0.26712873578071594, -0.0924820601940155, -0.3561871349811554, -0.920027494430542, -2.0856096744537354, -0.9252796769142151, -1.0277718305587769, -0.36882099509239197, -0.8888932466506958, 0.0021262094378471375, -0.8552444577217102, 0.2303985208272934, -2.777942419052124, -0.21400262415409088, -0.9872583746910095, 1.063941240310669, -1.3553024530410767, 2.4604456424713135, -0.4758318066596985, -2.8193602561950684, -1.6849960088729858, 0.013088397681713104, -0.9124735593795776, -1.891406536102295, -1.8317102193832397, -1.8655444383621216, -1.0668705701828003, 0.5956087112426758, -1.3975577354431152, 0.5196177363395691, -0.42587995529174805, 0.5068952441215515, -0.048858802765607834, 1.2219206094741821, -0.5736798644065857, -1.437694787979126, -1.706468939781189, -0.9353607296943665, 0.7249804735183716, -0.1760607361793518, -1.9174153804779053, 0.9220513105392456, 0.7117776274681091, -2.4174020290374756, -1.8389054536819458, -0.14589716494083405, -0.5203902125358582, -1.3670846223831177, -0.6636267900466919, -2.1484153270721436, -1.6775518655776978, -0.7171379327774048, 0.7439979910850525, 2.055281400680542, -1.444275140762329, -2.8453476428985596, -1.589473009109497, -0.7183375954627991, -0.49405747652053833, -0.6760373115539551, -2.6875193119049072, 0.035479433834552765, -1.934853196144104, -1.514564037322998, -0.15280380845069885, 0.09085699170827866, -1.1191447973251343, -2.2510128021240234, -1.7957350015640259, -2.044510841369629, 0.19331544637680054, -1.580498218536377, -0.2623864412307739, -0.016679733991622925, 1.5519094467163086, 0.37249836325645447, -0.4594975709915161, -0.7401052117347717, 0.8585418462753296, -0.18035784363746643, -0.34748169779777527, -0.3511081039905548, -1.3924505710601807, -1.1084591150283813, -0.41850921511650085, -0.8600528240203857, -1.2928428649902344, -1.644581913948059, 0.22303006052970886, -1.8866933584213257, -2.1649742126464844, -1.3965767621994019, -1.4874638319015503, -0.7234836220741272, -1.3037611246109009, -0.47189992666244507, -2.525473117828369, 0.10819034278392792, -0.3280699849128723, -1.1695425510406494, -1.8317608833312988, -0.20475704967975616, -0.4662973880767822, -0.030861079692840576, 0.0039168596267700195, 0.0685638040304184, -0.8210834264755249, 0.4119284749031067, -1.589627981185913, -1.5161776542663574, -0.2742723226547241, 0.40112605690956116, -0.4415944218635559, -0.653243362903595, -0.6902576684951782, -0.33722639083862305, -0.9753463864326477, 0.6221802830696106, -0.8058217763900757, -0.04719001054763794, 0.21567675471305847, -0.29695677757263184, -1.0586086511611938, -0.8903605341911316, -0.9292663931846619, 0.07758824527263641, -0.545746386051178, -0.2055511623620987, -0.47596168518066406, -1.4253058433532715, -1.290781855583191, 0.28840744495391846, -1.3900758028030396, 0.29516521096229553, -0.8312245607376099]
    x = False in list(map(lambda x: math.isclose(x[0], x[1], abs_tol=0.00001), zip(featureVector.vector, correctVector)))
    assert not x



def test_getFeatureVector2():
    response = client.post("/getFeatureVector",
                        headers={"Content-Type": "application/json"},
                        json={"url": "https://avatars.githubusercontent.com/u/82787843?v=4"})    

    assert response.status_code == 200
    featureVector = FeatureVector.parse_obj(response.json())
    correctVector = [-0.6541516780853271, -0.150190070271492, 2.2691588401794434, 1.1328152418136597, -1.40207839012146, -0.232422336935997, -2.8774197101593018, 0.6769130825996399, 0.043497517704963684, -1.0455843210220337, -0.3846234083175659, 0.8916327953338623, -0.23105590045452118, -1.6046874523162842, -0.21678000688552856, -0.44304484128952026, -0.3915237486362457, 0.09074573218822479, 0.42565545439720154, 1.839697241783142, -0.7450017929077148, -0.007605303078889847, -1.589704990386963, -1.4464994668960571, -0.4644906222820282, -2.3478453159332275, -0.3840617835521698, 0.5090372562408447, 1.0857422351837158, -0.7177367210388184, 0.27437257766723633, -0.7203239798545837, -1.4688657522201538, 1.3031747341156006, 2.5625319480895996, -0.9472784996032715, -1.536664366722107, -0.034534990787506104, -2.6542813777923584, -1.0933775901794434, -0.38117101788520813, 0.6241554617881775, -1.2586318254470825, -0.1881038397550583, -2.739945888519287, -0.41817906498908997, -0.47275015711784363, -1.0372132062911987, -0.36789026856422424, -0.22204983234405518, -1.2773171663284302, -2.821712017059326, -0.6269442439079285, -1.0601325035095215, -0.036386966705322266, -0.07829468697309494, 1.3077582120895386, -2.3894410133361816, -2.5276525020599365, 0.9069228768348694, -0.11890660226345062, -1.652380347251892, -0.23379889130592346, -1.3321385383605957, 0.5532826781272888, 1.5439854860305786, -0.5465359091758728, -1.6519131660461426, -0.35887274146080017, -0.23695285618305206, -0.15581302344799042, 2.1670849323272705, 1.3943521976470947, 1.5599613189697266, 0.016763903200626373, -0.5455793142318726, 0.34918850660324097, 0.8713001608848572, 3.5500409603118896, -0.3895549774169922, 1.2187386751174927, -0.6844355463981628, 0.8705702424049377, -0.4889432191848755, 0.5408174991607666, 0.4775616228580475, 0.4020121395587921, -0.6789782047271729, -2.902104616165161, -2.202289581298828, 0.044282466173172, -0.49211740493774414, -0.5828298330307007, -1.2702161073684692, -2.1175742149353027, -0.421935498714447, -0.7054306268692017, 1.6487302780151367, 1.4092565774917603, -1.5544179677963257, -2.239588737487793, -0.8391874432563782, 0.19822171330451965, -0.7702639102935791, 2.2190141677856445, -0.7690871357917786, -0.008303675800561905, -2.4058446884155273, -1.05792236328125, 0.28983449935913086, -1.0260173082351685, 5.232710361480713, -0.16029517352581024, -0.18950225412845612, -0.42899587750434875, -0.7378554344177246, -0.17753252387046814, 0.8270226716995239, 1.1220812797546387, -0.8278883099555969, -0.7361790537834167, 0.6192904114723206, -1.100080966949463, -1.5154054164886475, -1.5713906288146973, -1.8009847402572632, 2.2832744121551514, -0.7343425750732422, -0.8681288957595825, -1.8577877283096313, -2.64812970161438, -0.9881004691123962, -1.3609424829483032, 3.0653250217437744, -1.229780912399292, -0.30120182037353516, -0.9187542796134949, -0.19204863905906677, -0.18080219626426697, 1.0378532409667969, -1.0638898611068726, -0.32864660024642944, -0.772876501083374, 0.7154181003570557, -1.811875343322754, 1.088995337486267, 0.4797237813472748, 1.9135342836380005, 0.953964114189148, 2.3851962089538574, 0.7520709037780762, -1.5367884635925293, -1.2461795806884766, 0.3631434440612793, -0.06704838573932648, -1.0948810577392578, 0.3280283212661743, 1.171282410621643, -1.8333173990249634, -0.056605029851198196, 0.31307679414749146, -1.3819938898086548, -0.919407844543457, -1.058849811553955, -1.7026482820510864, 0.41643112897872925, -3.010389566421509, -2.3437998294830322, 0.7683536410331726, 3.001168966293335, 1.3368725776672363, -2.5663042068481445, -2.690073013305664, -1.4211777448654175, 0.17095153033733368, 0.30895453691482544, -2.47080135345459, -0.2660483121871948, -0.7876901030540466, -1.4350688457489014, -2.4431228637695312, -1.5608981847763062, -0.3769076466560364, 0.640721321105957, 0.456542432308197, -3.124837875366211, -2.3492045402526855, -0.7642425298690796, -3.000458002090454, -0.9075329303741455, -2.033604383468628, 0.4317721128463745, -1.5065503120422363, -1.5908598899841309, -2.9480223655700684, -1.9461032152175903, -1.5228081941604614, 0.41785991191864014, -2.18599534034729, -2.8289690017700195, 0.1734665036201477, -2.3594326972961426, -2.8016812801361084, -1.7464197874069214, -2.597193479537964, -0.7743512392044067, 1.0476707220077515, 0.0616174153983593, -0.6883636713027954, -0.17728550732135773, -0.7658352255821228, -3.2785956859588623, 1.0539276599884033, -0.4320865571498871, 0.7442358732223511, -0.38822802901268005, 0.11869226396083832, -0.24293114244937897, -0.7890135645866394, 0.6855837106704712, -1.7326509952545166, -1.0042539834976196, 0.3257846236228943, 0.6953774094581604, -0.16961891949176788, 0.3341592848300934, -0.21382886171340942, 1.5804799795150757, -1.6389634609222412, -1.5629398822784424, -1.0799286365509033, 0.06828455626964569, -0.9670786261558533, -0.4430718421936035, 0.9680933356285095, -0.12337604910135269, -0.14996591210365295, 0.08010974526405334, -0.5301334857940674, 1.086861252784729, 0.6212299466133118, 0.24238628149032593, -2.432971477508545, -1.8341853618621826, 0.8604214191436768, -1.5116885900497437, -1.319215178489685, -0.3485652208328247, -0.5906339883804321, 1.0326356887817383, 0.14214670658111572, 1.2869534492492676, -0.26557615399360657, -1.7321752309799194, -3.0125300884246826, 1.8230433464050293, -0.7482772469520569, 1.2893900871276855, 0.19385674595832825, -0.3966653645038605, -0.8951740264892578, -1.0904618501663208, -0.042062610387802124, -0.4149799942970276, -0.5890563726425171, -0.29020819067955017, -0.9325560331344604, -1.1278126239776611, 1.116196870803833, -1.391396403312683, -3.6635854244232178, 0.9980550408363342, -0.28494036197662354, -0.628079354763031, 0.39745378494262695, 1.350882887840271, 1.3981952667236328, 0.919564425945282, 0.06517510116100311, -1.2307507991790771, 0.31912511587142944, 0.865348219871521, -0.6924704313278198, -0.9787050485610962, -0.0497722253203392, 0.39553529024124146, 0.032908353954553604, -1.169089436531067, 0.8536350727081299, 0.3535827100276947, -0.13366904854774475, -2.6537294387817383, -0.7797922492027283, 0.14813397824764252, 1.5047041177749634, 1.0866212844848633, -0.8671818971633911, -0.27602049708366394, 0.18061648309230804, -0.15291079878807068, 1.040379524230957, -1.534310221672058, 1.479383111000061, -0.4572696387767792, -0.8081148266792297, 1.786749243736267, -1.528198003768921, -0.18733718991279602, -1.869645118713379, 1.1613343954086304, 1.3478761911392212, -1.24384343624115, -0.6868172287940979, 0.6814625859260559, 0.9627346992492676, 0.5544708967208862, 0.22395411133766174, 0.9727469682693481, -1.1560893058776855, -1.119827389717102, -1.4440242052078247, 0.1741030216217041, -0.3951931595802307, -0.13721723854541779, -0.768670380115509, -0.7362111806869507, 2.129112720489502, 1.3443305492401123, -1.403433084487915, -0.04656391590833664, 0.5265740156173706, 1.0313067436218262, -0.43587103486061096, 0.725578248500824, -1.2316006422042847, -2.67220401763916, 1.4942981004714966, 2.2694091796875, 2.2643048763275146, 0.43405938148498535, 1.6043020486831665, 1.650967001914978, 0.738480806350708, -0.06797858327627182, 0.3906066417694092, 0.8684508800506592, 0.9750847220420837, 1.4302787780761719, -0.955162763595581, -0.8145874738693237, 0.44790032505989075, -0.621241569519043, -1.3527370691299438, 1.5713450908660889, 1.1371116638183594, 2.6576173305511475, 1.3017385005950928, 1.9695912599563599, 0.35344618558883667, -1.7349051237106323, 1.5569052696228027, 0.31163251399993896, 0.5518840551376343, -0.7174199819564819, -0.29102006554603577, -0.1270110160112381, -0.0016331672668457031, 0.5927640199661255, -0.643500030040741, -1.217415690422058, -0.6727395057678223, -0.14990824460983276, -2.3503284454345703, -0.8299307227134705, -1.4324259757995605, 0.06327324360609055, -0.5581081509590149, -0.5790771842002869, -1.688592791557312, -1.8436604738235474, -2.2462310791015625, -0.7538251280784607, -1.1120675802230835, 0.0821642279624939, -1.6853713989257812, -1.4925674200057983, -0.11897040903568268, 0.15949223935604095, 0.17973490059375763, -0.7441338896751404, -0.16633176803588867, -2.0710794925689697, 0.784544050693512, -2.663179636001587, -0.35385242104530334, -1.176105260848999, -2.2560434341430664, -0.8133042454719543, 1.287185549736023, -0.6530892252922058, -0.5187628269195557, 0.11291299760341644, -0.7214058637619019, 0.38211697340011597, -0.9888637661933899, 2.939054250717163, -2.157632827758789, -1.0019245147705078, -1.227626085281372, 3.0015876293182373, -1.3113301992416382, -0.9229317903518677, -2.092806339263916, -2.594045639038086, -0.07137192785739899, 1.0087800025939941, -0.32570502161979675, 0.30234959721565247, 0.15459978580474854, 0.7684308290481567, 0.8188773393630981, 3.1171376705169678, 0.4435212016105652, 3.0543406009674072, 0.4265180230140686, 0.9992990493774414, -0.17770978808403015, 0.43520981073379517, 1.485962152481079, -1.7616993188858032, 2.736717700958252, 0.08136995881795883, -1.2704907655715942, -0.5005661249160767, 0.37210893630981445, -2.630621910095215, -0.8565277457237244, 3.232879877090454, -0.6162351369857788, -1.5727531909942627, -0.7688013911247253, -2.2713801860809326, -0.7998149991035461, 0.6035044193267822, 1.1127512454986572, -2.2668774127960205, 0.5919442176818848, -2.3539726734161377, -0.24338127672672272, 0.2115485519170761, 0.15915346145629883, 4.572418212890625, -1.4185434579849243, -0.35122355818748474, -1.7677700519561768, 1.1522325277328491, -0.42765095829963684, 3.138701915740967, 0.17087896168231964, -3.8136141300201416, 1.29170823097229, 0.26404762268066406, -0.6439929008483887, -2.1948118209838867, 6.723587512969971, -1.1804957389831543, 0.8281905055046082, 0.7355685830116272, 0.8124445080757141, -0.026270851492881775, 1.022574543952942, -0.3723439574241638, 2.5888164043426514, -2.9438376426696777, -1.4764621257781982, -2.2144126892089844, -2.127214193344116, 0.7358222007751465, 1.2938506603240967, -1.1286998987197876, 0.1292499452829361, 1.3181533813476562, -2.4752888679504395, 1.1234076023101807, 0.6827633380889893, -1.541340947151184, -0.5366908311843872, -1.7462331056594849, 3.7339887619018555, 0.7953845858573914, 2.8611857891082764, -0.6306325793266296, 1.197172999382019, -2.045225143432617, 0.5960491895675659, -1.0084853172302246, -1.14958918094635, 0.6281640529632568, 1.3566185235977173, 0.8361508846282959, 0.05597256124019623, -0.7613757252693176, -2.224000930786133, -1.309518814086914, 0.5474795699119568, -1.7969162464141846, 7.3272175788879395, -0.2637096047401428, 0.37420913577079773, -2.1663079261779785, -2.2109317779541016, -2.6738908290863037, 2.0035924911499023, -0.03366396576166153, 2.311112642288208, 1.5668632984161377, 3.402693510055542, 2.820375442504883, -0.7531197667121887, 1.8973309993743896, -1.9615942239761353, -0.46384915709495544, 0.9570022821426392, 0.899040162563324, 0.06659888476133347, 0.9442369937896729, -0.22560811042785645, 0.733237087726593, -4.552065372467041, -2.887266159057617, 0.891392171382904, -3.4360361099243164, 1.3625749349594116, 0.33290594816207886, -0.9333370923995972, 0.12921865284442902, -0.16840508580207825, 3.241579294204712, -1.7238256931304932, 3.868248462677002, 1.0097014904022217, 3.2859458923339844, 1.7115551233291626, 0.06979120522737503, -2.278404712677002, -0.5459080338478088, -3.6291356086730957, 0.796404242515564, -1.1561565399169922, 2.746272325515747, -2.710336446762085, 2.1125311851501465, -2.1286749839782715, -1.1034626960754395, -0.8052743077278137, 0.16457273066043854, 1.5682684183120728, 0.6920499801635742, 0.36741822957992554, 4.024144649505615, 0.48313915729522705, 2.452937364578247, -1.83282470703125, 4.271416664123535, -0.4237344563007355, 1.5199308395385742, -0.9881107807159424, -0.38015949726104736, 1.1174103021621704, -1.3207560777664185, 0.12783755362033844, -4.920547962188721, 1.0684902667999268, -0.2165985405445099, -1.2086236476898193, -0.9520623087882996, -1.1694881916046143, -0.796608030796051, -0.09842655062675476, -1.2150763273239136, 1.5232092142105103, -0.052030034363269806, 0.5398532748222351, 1.9504127502441406, 5.387966156005859, 0.43219155073165894, 3.089045286178589, 1.3747810125350952, -0.3334716856479645, -0.48731571435928345, 0.055945657193660736, 1.5122020244598389, -4.021698951721191, 1.2184088230133057, -1.1932556629180908, 2.3758816719055176, 2.533393621444702, -1.2323343753814697, -3.2741189002990723, -0.8185686469078064, 4.108469009399414, 1.8667367696762085, -3.035074234008789, 2.745920181274414, -0.8944645524024963, -4.758922576904297, 1.4980370998382568, 0.9209538102149963, 0.08343473821878433, -1.4312269687652588, 1.2819910049438477, 0.5078374147415161, 2.501180410385132, -1.4218499660491943, 1.087348222732544, -1.0841480493545532, 0.5516870617866516, -1.8042291402816772, -1.1395304203033447, 3.0770695209503174, 0.33897730708122253, 2.1009345054626465, 0.6526235938072205, 3.295772075653076, -3.2785778045654297, -0.2384876012802124, 0.2529841363430023, 0.20672887563705444, -0.3925178349018097, 1.1686110496520996, -0.6429160833358765, 0.8460859060287476, -3.662965774536133, 0.17494969069957733, 0.11168240010738373, 2.8602890968322754, -1.0142364501953125, -2.5828628540039062, -1.5685449838638306, 0.21811869740486145, 3.2206690311431885, 0.8224436640739441, -0.30148500204086304, 0.6022987961769104, 3.0648186206817627, 0.7574905753135681, 5.527985572814941, -1.9270589351654053, -0.7667931914329529, 0.5191616415977478, 1.639634370803833, -3.1818625926971436, -1.3693400621414185, -1.8643423318862915, -1.3625847101211548, 0.28988081216812134, -0.6739702224731445, 0.9051918983459473, 1.417080044746399, -1.4843347072601318, 0.12824007868766785, -2.102229118347168, -3.1266260147094727, -0.6756381392478943, -1.6460442543029785, -1.261974811553955, -0.08772818744182587, 0.558722734451294, -2.530035972595215, -2.924567699432373, -1.0514525175094604, -0.6797170042991638, 3.7071239948272705, -0.4255135655403137, 4.447412967681885, -0.8820498585700989, 2.540560245513916, 5.92382287979126, -0.0271659716963768, 4.727590084075928, -3.1989760398864746, -1.9258098602294922, 0.9856094121932983, -0.7125816941261292, 3.7388336658477783, -3.3023805618286133, -0.7648090124130249, -0.6994668245315552, -1.35360848903656, -1.5211472511291504, 1.709924578666687, -2.803710699081421, 1.4118461608886719, 0.8794060349464417, 4.010195732116699, -1.1784732341766357, -1.3798083066940308, -3.4922709465026855, -2.377106189727783, 0.42307037115097046, 0.865135669708252, 0.7449417114257812, -1.4853408336639404, 1.1497098207473755, -3.6737942695617676, 0.24929533898830414, 0.3776935935020447, -3.103632926940918, 1.074366807937622, -1.0817116498947144, -2.1809868812561035, 0.39463022351264954, 0.4507255554199219, -0.4042757749557495, 4.529103755950928, -2.6037187576293945, 0.09926270693540573, -1.7941466569900513, 2.9565043449401855, 0.11242932826280594, -1.9077763557434082, 1.558902621269226, -3.8761866092681885, -0.3704659938812256, -0.3669302761554718, 1.0412752628326416, 0.043568700551986694, -1.8886600732803345, 0.3205113410949707, 6.833893299102783, 2.4526591300964355, -0.981174647808075, -1.8185861110687256, -3.2957305908203125, -2.97609806060791, -1.8240495920181274, -1.8395265340805054, -2.5336050987243652, 1.2885041236877441, -2.0051610469818115, -0.6184184551239014, 3.3907856941223145, -1.1496663093566895, 1.6184170246124268, 0.6667492389678955, -0.45925483107566833, 2.460664749145508, -0.2656381130218506, -1.8182291984558105, 3.330655336380005, -1.6704933643341064, 1.1448758840560913, -0.23426462709903717, -1.1992278099060059, -1.686456322669983, 1.365427017211914, -1.3846497535705566, 0.15367859601974487, -1.0531964302062988, -2.3837697505950928, 2.3051981925964355, -2.1038124561309814, -1.1890497207641602, -1.1975748538970947, -2.5431830883026123, 5.937901020050049, -2.7746036052703857, 1.7612066268920898, 2.0642895698547363, 2.145793914794922, 1.8135581016540527, -2.2272720336914062, 0.9240421652793884, 1.232953667640686, 2.325796365737915, -1.0895240306854248, -3.3287429809570312, 1.0030286312103271, 1.0653456449508667, -3.8172144889831543, 0.3678690195083618, 1.519574761390686, -0.5501406192779541, 2.296924352645874, -0.10826277732849121, -4.4916229248046875, 0.23031310737133026, 5.139993190765381, -1.0352907180786133, 2.552375078201294, 0.3719412684440613, 0.35041913390159607, 0.797912061214447, -0.48548516631126404, -3.916917324066162, 0.9164050817489624, 0.04713224992156029, 1.759979486465454, -2.7553274631500244, -0.29201263189315796, 0.6115792989730835, 0.12788453698158264, 3.199655055999756, 0.1547454446554184, -1.2065589427947998, 1.0313588380813599, -3.312472343444824, -0.4151880145072937, 1.9301308393478394, 0.2460974156856537, -1.430077314376831, -0.4094248414039612, -0.5028253197669983, 0.2258683145046234, 1.2123991250991821, -2.3548481464385986, 2.378284215927124, -1.4255003929138184, -0.5232772827148438, 0.3751239478588104, 0.24796465039253235, 3.359604597091675, -1.2970378398895264, -1.9340977668762207, -2.1534926891326904, 0.08495910465717316, -1.2368298768997192, -0.04215430095791817, -0.2209548056125641, -0.6171169877052307, 4.300899028778076, 1.3861526250839233, -1.3553684949874878, -0.005480676889419556, -0.757739782333374, 3.5848934650421143, 0.6660550236701965, 0.29452046751976013, -0.48673731088638306, 0.36683163046836853, -0.04215151071548462, -1.4809871912002563, -1.9348902702331543, -1.6135916709899902, -1.7223838567733765, -0.1329357773065567, 0.40178731083869934, 0.13205662369728088, -3.393589973449707, 0.9090160131454468, -1.0227952003479004, -0.9264398813247681, -2.0472593307495117, 2.3303210735321045, -3.0059051513671875, 3.039405107498169, 1.0565048456192017, -0.6965434551239014, 0.33474308252334595, 2.475499391555786, 2.1195507049560547, -1.3352818489074707, -0.19341632723808289, 1.895653486251831, -1.734597086906433, -2.669375419616699, 1.9931526184082031, -0.6795179843902588, 1.1749475002288818, -1.218684196472168, 2.431746482849121, 1.72808837890625, -0.9842360019683838, -0.6761195659637451, -2.7558939456939697, -0.12015888839960098, -3.188159704208374, -0.2130890041589737, 0.5290400981903076, -3.090289354324341, 0.13142818212509155, 0.4723223149776459, -2.9718430042266846, 1.2055102586746216, -0.42892712354660034, 0.48800721764564514, -1.2116210460662842, 3.027935743331909, 0.46686580777168274, 0.2501929998397827, -1.4210584163665771, 2.206641435623169, 2.2967164516448975, 3.7400434017181396, -2.3364620208740234, 0.26935213804244995, -0.28264909982681274, -1.5474337339401245, -0.8201003074645996, -1.4218559265136719, 0.6118388175964355, 0.23712462186813354, -0.16425065696239471, -2.309290885925293, 2.8784873485565186, -1.29698646068573, 2.0769193172454834, 0.739801824092865, -0.5889189839363098, 0.2373853623867035, 0.8644252419471741, 1.17562735080719, 1.492822289466858, 4.1278076171875, -0.49534767866134644, 0.23082773387432098, 0.29080215096473694, 1.3056715726852417, 3.4849660396575928, 1.2600852251052856, -2.494711399078369, 2.6100406646728516, -0.3617485463619232, -0.06797336041927338, -0.4643842279911041, -1.6542396545410156, -0.4164313077926636, 0.3685339391231537, -0.8064621686935425, -0.029720164835453033, 2.2567033767700195, 0.37249523401260376, 2.125744342803955, -0.5687805414199829, -0.0435744933784008, -2.5302884578704834, 0.7096647620201111, -1.5262186527252197, -1.3502953052520752, -0.8666558265686035, -0.010213196277618408, -1.4602444171905518, -1.0519167184829712, -1.0887514352798462, 0.7221059799194336, -2.0010128021240234, 0.9400997161865234, -0.09684097021818161, -0.8599546551704407, 2.717397928237915, -0.24862270057201385, 0.5929942727088928, 1.7250856161117554, 0.0992426648736, -0.06276360154151917, -1.2724496126174927, -0.7273260951042175, -0.6364067196846008, 1.0145500898361206, 1.6038252115249634, -1.0852115154266357, -0.4422900676727295, -0.8494358062744141, 0.6553695797920227, 1.2792102098464966, 0.6549375653266907, 0.6084496378898621, -0.9924684762954712, -0.6032337546348572, -0.2990136742591858, 0.1971348077058792, -0.4058113396167755, 0.5440961718559265, 0.6789796352386475, 2.5289456844329834, 1.0751945972442627, 0.8792070746421814, 2.9342360496520996, 0.19499164819717407, -0.9412899017333984, 0.761661171913147, -1.229801893234253, -0.5065769553184509, 1.8855736255645752, 0.9494262933731079, -0.8792145252227783, -1.7800655364990234, -2.758089065551758, 0.2647424340248108, 0.2558578848838806, 0.798761248588562, -2.3776464462280273, -1.6151235103607178, -0.08993460983037949, 0.2820585370063782, 0.4828996956348419, -1.2653183937072754, -0.47958680987358093, -0.5298916101455688, 0.44576361775398254]
    x = False in list(map(lambda x: math.isclose(x[0], x[1], abs_tol=0.00001), zip(featureVector.vector, correctVector)))
    assert not x


